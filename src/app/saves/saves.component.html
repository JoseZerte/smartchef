<ion-header>
  <ion-toolbar>
    <ion-title>ğŸ“š Mis Colecciones</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  @if (colecciones.length === 0) {
    <div class="empty-state">
      <p>ğŸ“‚ No tienes colecciones</p>
      <span>Crea tu primera colecciÃ³n</span>
    </div>
  }

  <div class="grid-container">
    @for (c of colecciones; track $index; let i = $index) {
      <div class="coleccion-card" (click)="abrirColeccion(i)">
        <div class="card-icon">ğŸ“</div>
        <div class="card-content">
          @if (!c.editando) {
            <h3 class="card-title">{{ c.nombre }}</h3>
            <div class="card-actions">
              <button class="btn-edit" (click)="editarNombre(c, $event)">âœï¸</button>
              <button class="btn-delete" (click)="eliminarColeccion(i, $event)">ğŸ—‘ï¸</button>
            </div>
          } @else {
            <ion-input 
              [(ngModel)]="c.nombre" 
              (ionBlur)="guardarNombre(c)"
              (click)="$event.stopPropagation()"
              class="input-edit">
            </ion-input>
          }
        </div>
        <p class="card-count">
          @if (c.recetas.length) {
            {{ c.recetas.length }} receta{{ c.recetas.length > 1 ? 's' : '' }}
          } @else {
            VacÃ­a
          }
        </p>
      </div>
    }
  </div>
</ion-content>

<!-- FAB para agregar -->
<ion-fab slot="fixed" vertical="bottom" horizontal="end">
  <ion-fab-button (click)="agregarColeccion()">
    <span class="fab-icon">+</span>
  </ion-fab-button>
</ion-fab>
